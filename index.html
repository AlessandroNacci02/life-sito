<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>L.I.F.E ‚Äì Impianti elettrici, Fotovoltaico, Domotica, Condizionamento in Toscana</title>
  <meta name="description" content="Impianti elettrici civili e industriali, fotovoltaico, domotica, videosorveglianza, allarmi e condizionamento. Soluzioni su misura a Lucca e in tutta la Toscana. Richiedi un preventivo gratuito!" />
  <meta name="keywords" content="impianti elettrici, fotovoltaico, domotica, condizionamento, videosorveglianza, allarmi, Lucca, Toscana, installazione, manutenzione, climatizzazione, sicurezza, energia, smart home, preventivo" />
  <meta name="author" content="L.I.F.E Impianti e Tecnologie" />
  <link rel="canonical" href="https://www.life-impianti.it/" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet" />
  <meta name="theme-color" content="#00C853" />
  <meta property="og:title" content="L.I.F.E ‚Äì Impianti elettrici, Fotovoltaico, Domotica, Condizionamento in Toscana" />
  <meta property="og:description" content="Impianti elettrici civili e industriali, fotovoltaico, domotica, videosorveglianza, allarmi e condizionamento. Soluzioni su misura a Lucca e in tutta la Toscana." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.life-impianti.it/" />
  <meta property="og:image" content="img/hero.jpg" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <style>
    :root{
      --primary:#00C853;
      --accent:#00B0FF;
      --bg:#F9FBF9;
      --text:#1C1C1C;
      --muted:#6B7280;
      --card:#FFFFFF;
      --line:#e5e7eb;
      --shadow:0 10px 30px rgba(0,0,0,0.08);
      --shadow-strong:0 20px 50px rgba(0,0,0,0.18);
      --faq-bg: #f1f8f5;
      --faq-border: #00C853;
      --faq-icon: #00B0FF;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body {
      font-family: Montserrat,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background: linear-gradient(120deg, #f1fdf6 0%, #e6f7fb 100%);
      color: var(--text);
      overflow-x: hidden;
      line-height: 1.6;
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    html { font-size: 16px; }
    h1,h2,h3,h4,h5,h6 { line-height: 1.2; }
    h1, .section-title { font-size: 2.2rem; }
    h2 { font-size: 1.5rem; }
    h3 { font-size: 1.15rem; }
    /* Header */
    header{
      position:fixed;inset:0 0 auto 0;z-index:1000;
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 24px;transition:background .3s, box-shadow .3s;
      background:rgba(255,255,255,.6);backdrop-filter:saturate(140%) blur(10px)
    }
    header.scrolled{background:#fff;box-shadow:0 4px 20px rgba(0,0,0,.06)}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.5px}
    .brand svg{width:34px;height:34px}
    nav a{margin-left:18px;font-weight:600;position:relative}
    nav a::after{content:"";position:absolute;left:0;bottom:-6px;width:0;height:2px;background:linear-gradient(90deg,var(--primary),var(--accent));transition:width .25s}
    nav a:hover::after{width:100%}
    .cta-head{margin-left:14px;padding:8px 14px;border-radius:999px;font-weight:700;color:#fff;background:linear-gradient(90deg,var(--primary),var(--accent));box-shadow:0 6px 18px rgba(0,0,0,.18)}
    .lang{margin-left:10px;border:1px solid var(--line);border-radius:999px;padding:6px 10px;font-size:.9rem;background:#fff}

    /* Hamburger */
    .hamburger{display:none;flex-direction:column;gap:4px;width:32px;height:32px;justify-content:center;align-items:center;background:none;border:none;cursor:pointer;}
    .hamburger span{display:block;width:22px;height:3px;background:var(--primary);border-radius:2px;transition:.3s}

    /* Mobile nav */
    .mobile-nav{
      display:none;position:fixed;top:0;right:0;height:100vh;width:260px;background:#fff;box-shadow:-2px 0 16px rgba(0,0,0,.08);z-index:2000;
      flex-direction:column;padding:32px 24px;gap:18px;transform:translateX(100%);transition:transform .3s;
    }
    .mobile-nav.open{display:flex;transform:translateX(0);}
    .mobile-nav a{margin:0 0 18px 0;font-weight:700;font-size:1.1rem;}
    .mobile-nav .close{align-self:flex-end;font-size:2rem;background:none;border:none;color:var(--primary);cursor:pointer;}

    /* Hero */
    .hero{
      position:relative;
      height:100vh;
      display:grid;
      place-items:center;
      text-align:center;
      color:#fff;
      background: url('img/hero.jpg') center center/cover no-repeat;
    }
    .hero::before{content:"";position:absolute;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,.35),rgba(0,0,0,.45));z-index:-1}
    .hero h1{font-size:clamp(32px,5vw,64px);margin:0 0 10px 0;font-weight:800}
    .hero p{font-size:clamp(16px,2.2vw,22px);opacity:.95;max-width:900px;margin:0 auto}
    .cta-row{margin-top:24px;display:flex;flex-wrap:wrap;gap:12px;justify-content:center}
    .btn{
      display:inline-flex;align-items:center;gap:10px;padding:12px 18px;border-radius:999px;font-weight:700;
      color:#fff;background:linear-gradient(90deg,var(--primary),var(--accent));
      box-shadow:0 8px 24px rgba(0,0,0,.2);transition:transform .2s, box-shadow .2s
    }
    .btn:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 12px 30px rgba(0,0,0,.28)}
    .btn-outline{background:#fff;color:var(--text);border:1px solid var(--line);box-shadow:0 4px 16px rgba(0,0,0,.08)}
    .btn-outline:hover{box-shadow:var(--shadow)}

    /* Sections */
    section{max-width:1200px;margin:0 auto;padding:80px 24px}
    .section-title{font-size:32px;margin:0 0 8px 0}
    .section-sub{color:var(--muted);margin:0 0 28px 0}

    /* Migliora la sezione servizi: centratura, spacing, card pi√π moderne */
    #servizi {
      text-align: center;
      padding-top: 90px;
      padding-bottom: 70px;
    }
    #servizi .section-title {
      font-size: 2.3rem;
      margin-bottom: 6px;
      letter-spacing: 0.5px;
    }
    #servizi .section-sub {
      font-size: 1.13rem;
      margin-bottom: 38px;
    }
    .services {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 28px 22px;
      margin-top: 10px;
    }
    .card {
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,200,83,0.08), 0 1.5px 8px rgba(0,176,255,0.07);
      overflow: hidden;
      width: 320px;
      min-height: 410px;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      transition: transform .18s, box-shadow .18s;
      margin-bottom: 0;
    }
    .card:hover {
      transform: translateY(-6px) scale(1.025);
      box-shadow: 0 16px 40px rgba(0,200,83,0.13), 0 4px 18px rgba(0,176,255,0.10);
    }
    .card-media {
      height: 170px;
      overflow: hidden;
      border-bottom: 1.5px solid #e5e7eb;
    }
    .card-media img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform .5s cubic-bezier(.77,0,.18,1);
    }
    .card:hover .card-media img {
      transform: scale(1.08) rotate(-1deg);
    }
    .card-body {
      padding: 20px 18px 18px 18px;
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }
    .card h3 {
      margin: 0 0 8px 0;
      color: var(--primary);
      font-size: 1.18rem;
      font-weight: 700;
      letter-spacing: 0.2px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .card p {
      margin: 0 0 14px 0;
      color: #374151;
      font-size: 1.01rem;
    }
    .mini {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: auto;
    }
    .chip {
      font-size: .85rem;
      padding: 6px 13px;
      border-radius: 999px;
      background: linear-gradient(90deg,#e6f7fb 0%,#f1fdf6 100%);
      color: #0f172a;
      font-weight: 600;
      letter-spacing: 0.1px;
      border: 1px solid #e0f2f1;
    }
    @media (max-width: 1100px) {
      .services { gap: 22px 10px; }
      .card { width: 95vw; max-width: 340px; }
    }
    @media (max-width: 700px) {
      #servizi { padding-top: 60px; padding-bottom: 36px; }
      .services { gap: 18px 0; }
      .card { min-height: 340px; }
      .card-media { height: 120px; }
    }

    /* Portfolio slider with blur effect - doubled size */
    .slider {
      position: relative;
      width: 100%;
      max-width: 700px;
      margin: auto;
      overflow: hidden;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    .slides {
      display: flex;
      transition: transform 0.6s cubic-bezier(.77,0,.18,1);
      will-change: transform;
    }
    .slide-img-bg {
      position: relative;
      width: 100%;
      height: 440px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      flex-shrink: 0;
    }
    .slide-img-bg .slide-blur {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      object-fit: cover;
      filter: blur(18px) brightness(0.8);
      z-index: 1;
      pointer-events: none;
      user-select: none;
    }
    .slide-img-bg .slide-main {
      position: relative;
      z-index: 2;
      max-height: 360px;
      max-width: 90%;
      border-radius: 10px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.13);
      object-fit: contain;
      background: rgba(255,255,255,0.15);
    }
    .slider-arrow{
      position:absolute;top:50%;transform:translateY(-50%);
      background:rgba(255,255,255,0.85);border:none;border-radius:50%;width:44px;height:44px;cursor:pointer;
      font-size:2rem;color:var(--primary);box-shadow:0 2px 8px rgba(0,0,0,.12);z-index:2;
      display:flex;align-items:center;justify-content:center;
    }
    .slider-arrow:focus{outline:2px solid var(--accent);}
    .slider-arrow.left{left:12px;}
    .slider-arrow.right{right:12px;}

    /* Reviews */
    .reviews{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .review{background:#fff;border-left:4px solid var(--primary);padding:16px;border-radius:12px;box-shadow:var(--shadow)}
    .stars{color:#F59E0B}

    /* Contact */
    .contact{display:grid;grid-template-columns:1.2fr .8fr;gap:24px}
    .form{background:#fff;padding:18px;border-radius:16px;box-shadow:var(--shadow)}
    .form .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .form label{display:block;font-weight:600;margin:8px 0 6px}
    .form input,.form textarea,.form select{width:100%;padding:12px;border:1px solid var(--line);border-radius:10px;font:inherit}
    .form textarea{min-height:120px;resize:vertical}
    .note{font-size:.9rem;color:var(--muted)}
    .contact-card{background:#fff;padding:18px;border-radius:16px;box-shadow:var(--shadow)}
    .contact-list{list-style:none;padding:0;margin:0}
    .contact-list li{margin-bottom:10px}
    .form .error{color:#d32f2f;font-size:.95em;margin:6px 0 0 0;}

    /* Footer + cookie */
    footer{background:#ffffff;padding:32px 24px;border-top:1px solid var(--line);color:#6b7280;text-align:center}
    .cookie{position:fixed;left:16px;right:16px;bottom:16px;background:#111;color:#fff;border-radius:12px;padding:14px 16px;display:flex;align-items:center;justify-content:space-between;gap:10px;z-index:2000}
    .cookie .btn{box-shadow:none}

    /* Responsive */
    @media (max-width:960px){
      .contact{grid-template-columns:1fr}
      header nav{display:none}
      .hamburger{display:flex;}
      .mobile-nav{display:flex;}
      .tile{flex-basis:280px}
      .tile img{height:200px}
      .slider{max-width:98vw;}
      .slide-img-bg .slide-main{max-width:98vw;}
      .slide-img-bg{height:340px;}
      .slide-img-bg .slide-main{max-height:260px;}
    }
    @media (max-width:600px){
      section{padding:48px 8px;}
      .divider{margin:32px 8px;}
      .slide-img-bg .slide-main{max-width:98vw;}
      .slide-img-bg{height:200px;}
      .slide-img-bg .slide-main{max-height:120px;}
    }
    .slider { position:relative; overflow:hidden; max-width:700px; margin:32px auto; }
    .slides { display:flex; transition:transform 0.5s cubic-bezier(.77,0,.18,1); }
    .slide-img-bg { min-width:100%; position:relative; display:flex; align-items:center; justify-content:center; }
    .slide-blur { position:absolute; left:0; top:0; width:100%; height:100%; filter:blur(12px) brightness(0.8); object-fit:cover; z-index:0; }
    .slide-main { position:relative; z-index:1; max-width:90%; max-height:400px; border-radius:12px; box-shadow:0 4px 24px rgba(0,0,0,0.12); }
    .slider-arrow { position:absolute; top:50%; transform:translateY(-50%); background:rgba(255,255,255,0.8); border:none; font-size:2rem; padding:0 16px; cursor:pointer; border-radius:50%; z-index:2; }
    .slider-arrow.left { left:8px; }
    .slider-arrow.right { right:8px; }
    @media (max-width:700px) {
      .slide-main { max-width:98vw; max-height:220px; }
      .slider { max-width:100vw; }
    }
    /* Miglioramento stile FAQ */
    .faq-section {
      background: var(--faq-bg);
      border-radius: 18px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.07);
      padding: 48px 24px;
      margin-top: 48px;
    }
    .faq-list {
      list-style: none;
      padding: 0;
      margin: 0 auto;
      max-width: 700px;
    }
    .faq-list li {
      margin-bottom: 18px;
      border-radius: 12px;
      background: #fff;
      box-shadow: 0 2px 10px rgba(0,200,83,0.06);
      overflow: hidden;
      border-left: 4px solid var(--faq-border);
      transition: box-shadow .2s;
    }
    .faq-q {
      width: 100%;
      background: none;
      border: none;
      outline: none;
      text-align: left;
      font-size: 1.15rem;
      font-weight: 700;
      padding: 18px 48px 18px 20px;
      cursor: pointer;
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: background .2s;
      position: relative;
    }
    .faq-q:hover, .faq-q:focus {
      background: #f4fff7;
    }
    .faq-icon {
      font-size: 1.3em;
      margin-left: 16px;
      color: var(--faq-icon);
      transition: transform .3s cubic-bezier(.77,0,.18,1);
      display: inline-block;
    }
    .faq-q[aria-expanded="true"] .faq-icon {
      transform: rotate(90deg);
    }
    .faq-a {
      max-height: 0;
      overflow: hidden;
      background: #f8fefb;
      color: #333;
      font-size: 1.05rem;
      padding: 0 24px;
      transition: max-height .4s cubic-bezier(.77,0,.18,1), padding .3s;
      border-top: 1px solid #e0f7ef;
    }
    .faq-a.open {
      padding: 18px 24px;
      max-height: 200px;
      transition: max-height .5s cubic-bezier(.77,0,.18,1), padding .3s;
    }
    @media (max-width:600px){
      .faq-section { padding: 32px 4px; }
      .faq-q { font-size: 1rem; padding: 14px 40px 14px 12px; }
      .faq-a.open { padding: 14px 12px; }
    }
    .review-slider {
      position: relative;
      max-width: 540px;
      margin: 0 auto;
      min-height: 180px;
    }
    .review-slider .review {
      display: none;
      opacity: 0;
      transition: opacity .5s;
      position: absolute;
      left: 0; top: 0; width: 100%;
    }
    .review-slider .review.active {
      display: block;
      opacity: 1;
      position: relative;
    }
    .review-slider-outer {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0;
      margin: 0 auto;
      max-width: 700px;
      position: relative;
    }
    .review-slider {
      position: relative;
      max-width: 540px;
      width: 100%;
      margin: 0 24px;
      min-height: 180px;
    }
    .review-slider-outer .slider-arrow {
      position: static;
      transform: none;
      margin: 0 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,.10);
      background: #fff;
      color: var(--primary);
      transition: background .2s;
    }
    .review-slider-outer .slider-arrow:hover,
    .review-slider-outer .slider-arrow:focus {
      background: var(--primary);
      color: #fff;
    }
    @media (max-width:700px) {
      .review-slider-outer { max-width: 98vw; }
      .review-slider { margin: 0 4px; }
    }
    /* CTA fissa mobile */
    @media (max-width:700px) {
      .cta-fixed {
        position: fixed;
        left: 0; right: 0; bottom: 0;
        z-index: 3000;
        background: linear-gradient(90deg,#00C853,#00B0FF);
        color: #fff;
        text-align: center;
        padding: 14px 0 12px 0;
        font-size: 1.15rem;
        font-weight: 700;
        box-shadow: 0 -2px 18px rgba(0,0,0,0.10);
      }
      .cta-fixed a { color: #fff; text-decoration: none; }
      body { padding-bottom: 56px; }
    }
  </style>
<style>
  .star-label {
    font-size: 2em;
    color: #e0e0e0;
    cursor: pointer;
    transition: color .2s;
    user-select: none;
  }
  .star-label.selected,
  .star-label.hovered {
    color: #F59E0B;
    text-shadow: 0 1px 4px #ffe082;
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <header id="hdr" role="banner">
    <div class="brand">
      <svg viewBox="0 0 64 64" aria-hidden="true" focusable="false">
        <defs>
          <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#00C853"/><stop offset="1" stop-color="#00B0FF"/>
          </linearGradient>
        </defs>
        <path d="M32 4c15.5 0 28 12.5 28 28S47.5 60 32 60 4 47.5 4 32 16.5 4 32 4z" fill="url(#g)"/>
        <path d="M33 14l-8 16h10l-4 20 12-18H33l6-18z" fill="#fff" opacity=".95"/>
      </svg>
      <span>L.I.F.E</span>
    </div>
    <nav aria-label="Menu principale">
      <a href="#servizi" tabindex="0">Servizi</a>
      <a href="#portfolio" tabindex="0">Portfolio</a>
      <a href="#recensioni" tabindex="0">Recensioni</a>
      <a href="#chi-siamo" tabindex="0">Chi siamo</a>
      <a href="#faq" tabindex="0">FAQ</a>
      <a href="#contatti" tabindex="0">Contatti</a>
    </nav>
    <button class="hamburger" id="hamburger" aria-label="Apri menu" aria-controls="mobileNav" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
    <div style="display:flex;align-items:center;gap:8px">
      <a class="cta-head" href="tel:+393335044709" aria-label="Chiama L.I.F.E">Chiama</a>
      <button class="lang" id="langToggle" aria-label="Cambia lingua">IT / EN</button>
    </div>
    <nav class="mobile-nav" id="mobileNav" aria-label="Menu mobile">
      <button class="close" id="closeNav" aria-label="Chiudi menu">&times;</button>
      <a href="#servizi">Servizi</a>
      <a href="#portfolio">Portfolio</a>
      <a href="#recensioni">Recensioni</a>
      <a href="#chi-siamo">Chi siamo</a>
      <a href="#faq">FAQ</a>
      <a href="#contatti">Contatti</a>
    </nav>
  </header>

  <section class="hero" id="home" aria-label="Intro">
    <div>
      <h1>Energia. Sicurezza. Innovazione.</h1>
      <p>Impianti elettrici civili e industriali, fotovoltaico, domotica, condizionamento, videosorveglianza e allarmi in tutta la Toscana.</p>
      <div class="cta-row">
        <a class="btn" href="#contatti" aria-label="Richiedi preventivo">Richiedi preventivo</a>
        <a class="btn btn-outline" href="tel:+393335044709" aria-label="Chiama ora">Chiama ora</a>
        <a class="btn btn-outline" href="https://wa.me/393335044709?text=Ciao%20LIFE%2C%20vorrei%20un%20preventivo" target="_blank" rel="noopener" aria-label="Contattaci su WhatsApp">WhatsApp</a>
        <a class="btn btn-outline" href="mailto:info@life.it?subject=Richiesta%20preventivo" aria-label="Contattaci via Email">Email</a>
      </div>
    </div>
  </section>

  <section id="servizi" aria-label="I nostri servizi">
    <h2 class="section-title" style="text-align:center;">I nostri servizi</h2>
    <p class="section-sub" style="text-align:center;">Soluzioni su misura per casa e azienda. Interventi rapidi, certificati e garantiti.</p>
    <div class="services">
      <article class="card" tabindex="0" aria-label="Servizio: Fotovoltaico residenziale e industriale">
        <div class="card-media">
          <img src="https://images.unsplash.com/photo-1597094737760-9e3c6c6b1f3d?q=80&w=1200" alt="Impianto fotovoltaico su tetto residenziale" loading="lazy"/>
        </div>
        <div class="card-body">
          <h3>
            <svg width="22" height="22" fill="none" viewBox="0 0 24 24" style="vertical-align:middle;"><path fill="#00C853" d="M12 2v2m0 16v2m10-10h-2M4 12H2m15.07-7.07l-1.41 1.41M6.34 17.66l-1.41 1.41m12.02 0l-1.41-1.41M6.34 6.34L4.93 4.93"/><circle cx="12" cy="12" r="5" stroke="#00B0FF" stroke-width="2"/></svg>
            Fotovoltaico residenziale e industriale
          </h3>
          <p>Progettazione, installazione e monitoraggio. Massima resa e detrazioni.</p>
          <div class="mini"><span class="chip">Residenziale</span><span class="chip">Industriale</span><span class="chip">Storage</span></div>
        </div>
      </article>
      <article class="card" tabindex="0" aria-label="Servizio: Impianti elettrici civili e industriali">
        <div class="card-media">
          <img src="https://images.unsplash.com/photo-1581090700227-1e7e8f9f3d5b?q=80&w=1200" alt="Quadro elettrico professionale" loading="lazy"/>
        </div>
        <div class="card-body">
          <h3>
            <svg width="22" height="22" fill="none" viewBox="0 0 24 24" style="vertical-align:middle;"><rect x="3" y="7" width="18" height="10" rx="2" stroke="#00B0FF" stroke-width="2"/><path d="M7 7V5a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2" stroke="#00C853" stroke-width="2"/><circle cx="12" cy="12" r="2" fill="#00C853"/></svg>
            Impianti elettrici civili e industriali
          </h3>
          <p>Nuove installazioni, adeguamenti e certificazioni per ogni ambiente.</p>
          <div class="mini"><span class="chip">Civile</span><span class="chip">Industriale</span><span class="chip">Certificazioni</span></div>
        </div>
      </article>
      <article class="card" tabindex="0" aria-label="Servizio: Impianti di condizionamento">
        <div class="card-media">
          <img src="https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?q=80&w=1200" alt="Impianto di condizionamento moderno" loading="lazy"/>
        </div>
        <div class="card-body">
          <h3>
            <svg width="22" height="22" fill="none" viewBox="0 0 24 24" style="vertical-align:middle;"><rect x="3" y="7" width="18" height="10" rx="2" stroke="#00B0FF" stroke-width="2"/><path d="M8 17v2m8-2v2" stroke="#00C853" stroke-width="2"/><circle cx="12" cy="12" r="2" fill="#00C853"/></svg>
            Impianti di condizionamento
          </h3>
          <p>Installazione, manutenzione e assistenza di climatizzatori per abitazioni, uffici e industrie.</p>
          <div class="mini"><span class="chip">Residenziale</span><span class="chip">Commerciale</span><span class="chip">Industriale</span></div>
        </div>
      </article>
      <article class="card" tabindex="0" aria-label="Servizio: Domotica">
        <div class="card-media">
          <img src="https://images.unsplash.com/photo-1581092334607-cd6f6e8f9f3d?q=80&w=1200" alt="App di controllo domotico" loading="lazy"/>
        </div>
        <div class="card-body">
          <h3>
            <svg width="22" height="22" fill="none" viewBox="0 0 24 24" style="vertical-align:middle;"><rect x="4" y="4" width="16" height="16" rx="4" stroke="#00B0FF" stroke-width="2"/><path d="M8 12h8" stroke="#00C853" stroke-width="2"/><circle cx="12" cy="12" r="2" fill="#00C853"/></svg>
            Domotica
          </h3>
          <p>Automazioni intelligenti per comfort, efficienza e sicurezza.</p>
          <div class="mini"><span class="chip">Smart home</span><span class="chip">Integrazioni</span><span class="chip">App</span></div>
        </div>
      </article>
      <article class="card" tabindex="0" aria-label="Servizio: Videosorveglianza">
        <div class="card-media">
          <img src="https://images.unsplash.com/photo-1545259741-2ea3ebf51fc3?q=80&w=1200" alt="Telecamera di sicurezza esterna" loading="lazy"/>
        </div>
        <div class="card-body">
          <h3>
            <svg width="22" height="22" fill="none" viewBox="0 0 24 24" style="vertical-align:middle;"><rect x="3" y="7" width="18" height="10" rx="2" stroke="#00B0FF" stroke-width="2"/><circle cx="12" cy="12" r="2" fill="#00C853"/><path d="M17 7V5a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2" stroke="#00C853" stroke-width="2"/></svg>
            Videosorveglianza
          </h3>
          <p>Telecamere smart, registrazione continua e accesso remoto sicuro.</p>
          <div class="mini"><span class="chip">IP</span><span class="chip">Cloud</span><span class="chip">App</span></div>
        </div>
      </article>
      <article class="card" tabindex="0" aria-label="Servizio: Allarmi">
        <div class="card-media">
          <img src="https://images.unsplash.com/photo-1593950623955-1f3764f2b001?q=80&w=1200" alt="Tastierino impianto di allarme" loading="lazy"/>
        </div>
        <div class="card-body">
          <h3>
            <svg width="22" height="22" fill="none" viewBox="0 0 24 24" style="vertical-align:middle;"><rect x="4" y="4" width="16" height="16" rx="4" stroke="#00B0FF" stroke-width="2"/><path d="M8 8l8 8M8 16l8-8" stroke="#00C853" stroke-width="2"/></svg>
            Allarmi
          </h3>
          <p>Sistemi antintrusione integrati, sensori e controllo da smartphone.</p>
          <div class="mini"><span class="chip">Perimetrale</span><span class="chip">Volumetrico</span><span class="chip">Sirene</span></div>
        </div>
      </article>
    </div>
  </section>

<section id="portfolio" aria-label="Portfolio lavori">
  <h2 class="section-title">Portfolio</h2>
  <p class="section-sub">Alcuni dei nostri lavori realizzati in Toscana: impianti elettrici, fotovoltaico, domotica, condizionamento e sicurezza.</p>
  <div class="slider" aria-label="Slider portfolio">
    <button class="slider-arrow left" id="sliderPrev" aria-label="Precedente">&#8592;</button>
    <div class="slides" id="slides">
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio1.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio1.jpg" alt="Portfolio 1" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio2.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio2.jpg" alt="Portfolio 2" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio3.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio3.jpg" alt="Portfolio 3" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio4.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio4.jpg" alt="Portfolio 4" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio5.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio5.jpg" alt="Portfolio 5" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio6.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio6.jpg" alt="Portfolio 6" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio7.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio7.jpg" alt="Portfolio 7" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio8.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio8.jpg" alt="Portfolio 8" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio9.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio9.jpg" alt="Portfolio 9" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio10.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio10.jpg" alt="Portfolio 10" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio11.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio11.jpg" alt="Portfolio 11" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio12.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio12.jpg" alt="Portfolio 12" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio13.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio13.jpg" alt="Portfolio 13" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio14.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio14.jpg" alt="Portfolio 14" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio15.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio15.jpg" alt="Portfolio 15" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio16.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio16.jpg" alt="Portfolio 16" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio17.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio17.jpg" alt="Portfolio 17" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio18.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio18.jpg" alt="Portfolio 18" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio19.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio19.jpg" alt="Portfolio 19" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio20.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio20.jpg" alt="Portfolio 20" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio21.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio21.jpg" alt="Portfolio 21" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio22.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio22.jpg" alt="Portfolio 22" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio23.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio23.jpg" alt="Portfolio 23" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio24.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio24.jpg" alt="Portfolio 24" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio25.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio25.jpg" alt="Portfolio 25" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio26.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio26.jpg" alt="Portfolio 26" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio27.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio27.jpg" alt="Portfolio 27" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio28.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio28.jpg" alt="Portfolio 28" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio29.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio29.jpg" alt="Portfolio 29" loading="lazy"></div>
      <div class="slide-img-bg"><img class="slide-blur" src="img/portfolio30.jpg" alt="" aria-hidden="true" loading="lazy"/><img class="slide-main" src="img/portfolio30.jpg" alt="Portfolio 30" loading="lazy"></div>
    </div>
    <button class="slider-arrow right" id="sliderNext" aria-label="Successivo">&#8594;</button>
  </div>
</section>

<!-- Sostituisci il blocco recensioni nel <section id="recensioni"> con questo -->

  <section id="recensioni" aria-label="Recensioni clienti">
    <h2 class="section-title">Recensioni</h2>
    <div class="review-slider-outer">
      <button class="slider-arrow left" id="reviewPrev" aria-label="Recensione precedente">&#8592;</button>
      <div class="review-slider" id="reviewSlider" aria-live="polite">
        <div class="review active" id="noReviewsMsg" tabindex="0" style="text-align:center;">
          <p style="font-size:1.15em;color:#00B0FF;margin:32px 0;">
            Nessuna recensione presente.<br>
            <strong>Lascia la nostra prima recensione!</strong>
          </p>
        </div>
      </div>
      <button class="slider-arrow right" id="reviewNext" aria-label="Recensione successiva">&#8594;</button>
    </div>
    <div id="review-form-section" style="margin:36px auto 0 auto;max-width:540px;background:#fff;border-radius:14px;box-shadow:0 4px 18px rgba(0,0,0,0.07);padding:24px;">
      <h3 style="margin-top:0;color:#00C853;">Lascia una recensione</h3>
      <form id="reviewForm" autocomplete="off" aria-label="Lascia una recensione">
        <div style="display:flex;gap:12px;flex-wrap:wrap;">
          <input type="text" id="revName" name="revName" placeholder="Nome" required style="flex:1 1 120px;padding:10px;border-radius:8px;border:1px solid #e5e7eb;">
          <input type="text" id="revSurname" name="revSurname" placeholder="Cognome" required style="flex:1 1 120px;padding:10px;border-radius:8px;border:1px solid #e5e7eb;">
          <input type="text" id="revCity" name="revCity" placeholder="Citt√†" required style="flex:1 1 120px;padding:10px;border-radius:8px;border:1px solid #e5e7eb;">
          <input type="text" id="revProvince" name="revProvince" placeholder="Provincia (es: LU)" maxlength="2" required style="flex:0 0 80px;padding:10px;border-radius:8px;border:1px solid #e5e7eb;text-transform:uppercase;">
        </div>
        <div style="margin:14px 0 8px 0;">
          <label for="revStars" style="font-weight:600;">Stelle:</label>
          <span id="starInputs" style="margin-left:8px;display:inline-flex;gap:2px;flex-direction:row;">
            <input type="radio" name="revStars" id="star1" value="1" required style="display:none;">
            <label for="star1" class="star-label" data-value="1" aria-label="1 stella">‚òÖ</label>
            <input type="radio" name="revStars" id="star2" value="2" style="display:none;">
            <label for="star2" class="star-label" data-value="2" aria-label="2 stelle">‚òÖ</label>
            <input type="radio" name="revStars" id="star3" value="3" style="display:none;">
            <label for="star3" class="star-label" data-value="3" aria-label="3 stelle">‚òÖ</label>
            <input type="radio" name="revStars" id="star4" value="4" style="display:none;">
            <label for="star4" class="star-label" data-value="4" aria-label="4 stelle">‚òÖ</label>
            <input type="radio" name="revStars" id="star5" value="5" style="display:none;">
            <label for="star5" class="star-label" data-value="5" aria-label="5 stelle">‚òÖ</label>
          </span>
          <span id="starValue" style="margin-left:10px;color:#00B0FF;font-weight:600;"></span>
        </div>
        <div style="margin-bottom:10px;">
          <textarea id="revText" name="revText" required placeholder="Descrivi l‚Äôintervento svolto..." style="width:100%;padding:10px;border-radius:8px;border:1px solid #e5e7eb;min-height:60px;"></textarea>
        </div>
        <div style="margin-bottom:10px;">
          <label for="revDate" style="font-weight:600;">Data intervento:</label>
          <input type="month" id="revDate" name="revDate" required style="padding:8px;border-radius:8px;border:1px solid #e5e7eb;">
        </div>
        <div style="margin-bottom:10px;">
          <button type="submit" class="btn" style="width:100%;">Invia recensione</button>
        </div>
        <div id="revFormMsg" style="color:#00C853;font-weight:600;margin-top:6px;display:none;"></div>
      </form>
    </div>
  </section>

  <section id="chi-siamo" aria-label="Chi siamo">
    <h2 class="section-title">Chi siamo</h2>
    <p class="section-sub">Affianchiamo privati e aziende con progettazione e installazione certificate, con attenzione a efficienza, sostenibilit√† e comfort climatico.</p>
    <div style="display:flex;align-items:center;gap:32px;flex-wrap:wrap;">
      <img src="img/team.jpg" alt="Il team LIFE Impianti" style="max-width:220px;border-radius:14px;box-shadow:0 4px 18px rgba(0,0,0,0.10);margin-bottom:18px;">
      <div>
        <p>Operiamo in tutta la Toscana con team qualificati e fornitori selezionati. Ogni progetto nasce da un sopralluogo tecnico e da una consulenza trasparente. Siamo specializzati anche in impianti di condizionamento per ogni esigenza.</p>
        <ul style="padding-left:18px;margin:0 0 0 0;">
          <li>‚úîÔ∏è Esperienza ventennale</li>
          <li>‚úîÔ∏è Certificazioni e sicurezza</li>
          <li>‚úîÔ∏è Soluzioni su misura</li>
          <li>‚úîÔ∏è Assistenza post-vendita</li>
        </ul>
      </div>
    </div>
  </section>

  <section class="faq-section" id="faq" aria-label="Domande frequenti">
    <h2 class="section-title">Domande frequenti</h2>
    <ul class="faq-list">
      <li>
        <button class="faq-q" aria-expanded="false" aria-controls="faq1" tabindex="0">
          Fate preventivi gratuiti?
          <span class="faq-icon" aria-hidden="true">&#9654;</span>
        </button>
        <div class="faq-a" id="faq1">S√¨, tutti i nostri preventivi sono gratuiti e senza impegno.</div>
      </li>
      <li>
        <button class="faq-q" aria-expanded="false" aria-controls="faq2" tabindex="0">
          Installate anche impianti di condizionamento?
          <span class="faq-icon" aria-hidden="true">&#9654;</span>
        </button>
        <div class="faq-a" id="faq2">S√¨, siamo specializzati anche in climatizzazione per abitazioni, uffici e industrie.</div>
      </li>
      <li>
        <button class="faq-q" aria-expanded="false" aria-controls="faq3" tabindex="0">
          Lavorate solo a Lucca?
          <span class="faq-icon" aria-hidden="true">&#9654;</span>
        </button>
        <div class="faq-a" id="faq3">No, operiamo in tutta la Toscana e regioni limitrofe.</div>
      </li>
      <li>
        <button class="faq-q" aria-expanded="false" aria-controls="faq4" tabindex="0">
          Fornite assistenza post-vendita?
          <span class="faq-icon" aria-hidden="true">&#9654;</span>
        </button>
        <div class="faq-a" id="faq4">S√¨, garantiamo assistenza e manutenzione su tutti i nostri impianti.</div>
      </li>
    </ul>
  </section>

  <section id="contatti" aria-label="Contattaci">
    <h2 class="section-title">Richiedi un preventivo</h2>
    <p class="section-sub">Compila il form e allega foto dell‚Äôimpianto o del sito di installazione: rispondiamo rapidamente. Siamo a disposizione anche per impianti di condizionamento.</p>
    <div class="contact">
      <form class="form" id="quoteForm" novalidate autocomplete="on" aria-label="Modulo richiesta preventivo">
        <div class="row">
          <div>
            <label for="name">Nome e cognome</label>
            <input id="name" name="name" required placeholder="Mario Rossi" autocomplete="name" aria-required="true" />
            <div class="error" id="errName" aria-live="polite"></div>
          </div>
          <div>
            <label for="phone">Telefono</label>
            <input id="phone" name="phone" required placeholder="+39 ..." autocomplete="tel" aria-required="true" />
            <div class="error" id="errPhone" aria-live="polite"></div>
          </div>
        </div>
        <div class="row">
          <div>
            <label for="email">Email</label>
            <input id="email" name="email" type="email" placeholder="nome@dominio.it" autocomplete="email" />
            <div class="error" id="errEmail" aria-live="polite"></div>
          </div>
          <div>
            <label for="service">Servizio</label>
            <select id="service" name="service" aria-label="Seleziona servizio">
              <option>Fotovoltaico</option>
              <option>Impianti elettrici</option>
              <option>Condizionamento</option>
              <option>Domotica</option>
              <option>Videosorveglianza</option>
              <option>Allarmi</option>
            </select>
          </div>
        </div>
        <label for="message">Descrizione</label>
        <textarea id="message" name="message" placeholder="Raccontaci cosa ti serve, tempi, luogo..." aria-label="Descrizione richiesta"></textarea>
        <label for="photos">Allega foto dell‚Äôimpianto/sito</label>
        <input id="photos" name="photos" type="file" accept="image/*" multiple aria-label="Allega foto" />
        <p class="note">Suggerimento: pi√π foto = preventivo pi√π accurato.</p>
        <div class="cta-row" style="justify-content:flex-start">
          <button type="submit" class="btn" aria-label="Invia richiesta">Invia richiesta</button>
          <a class="btn btn-outline" id="whatsappBtn" href="#" target="_blank" rel="noopener" aria-label="Invia su WhatsApp">Invia su WhatsApp</a>
          <a class="btn btn-outline" id="emailBtn" href="#" aria-label="Invia via Email">Invia via Email</a>
        </div>
      </form>
      <aside class="contact-card" aria-label="Contatti rapidi">
        <h3 style="margin-top:0">Contatti <span class="privacy-badge" aria-label="Dati protetti">GDPR</span></h3>
        <ul class="contact-list">
          <li><strong>Telefono:</strong> <a href="tel:+393335044709">+39 333 504 4709</a></li>
          <li><strong>Email:</strong> <a href="mailto:info@life.it">info@life.it</a></li>
          <li><strong>WhatsApp:</strong> <a href="https://wa.me/393335044709" target="_blank" rel="noopener">Chatta su WhatsApp</a></li>
          <li><strong>Indirizzo:</strong> Toscana ‚Ä¢ Italia</li>
          <li><strong>Orari:</strong> Lun‚ÄìVen 9:00‚Äì18:00</li>
        </ul>
      </aside>
    </div>
  </section>

  <footer>
    <div style="margin-bottom:10px;">
      <a href="https://www.facebook.com/" target="_blank" rel="noopener" aria-label="Facebook" style="margin:0 8px;">
        <svg width="22" height="22" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="12" fill="#e6f7fb"/><path d="M15.5 8.5h-2V7.5c0-.41.34-.75.75-.75h1.25V5h-2.25A2.25 2.25 0 0 0 11 7.25v1.25H9.5V11H11v6h2.5v-6h1.5l.5-2.5z" fill="#00B0FF"/></svg>
      </a>
      <a href="https://www.instagram.com/" target="_blank" rel="noopener" aria-label="Instagram" style="margin:0 8px;">
        <svg width="22" height="22" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="12" fill="#e6f7fb"/><rect x="7" y="7" width="10" height="10" rx="3" stroke="#00C853" stroke-width="2"/><circle cx="16.5" cy="7.5" r="1" fill="#00B0FF"/></svg>
      </a>
      <a href="https://www.linkedin.com/" target="_blank" rel="noopener" aria-label="LinkedIn" style="margin:0 8px;">
        <svg width="22" height="22" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="12" fill="#e6f7fb"/><rect x="7" y="9" width="2" height="6" fill="#00B0FF"/><rect x="11" y="11" width="2" height="4" fill="#00B0FF"/><rect x="15" y="9" width="2" height="6" fill="#00B0FF"/><circle cx="8" cy="7" r="1" fill="#00C853"/></svg>
      </a>
    </div>
    <div style="margin-bottom:8px;font-weight:600;color:#00C853;">Azienda certificata ‚Ä¢ 20 anni di esperienza</div>
    ¬© <span id="year"></span> L.I.F.E ‚Äì Impianti e Tecnologie ‚Ä¢ P.IVA 02189330101 ‚Ä¢ 
    <a href="privacy.html" rel="noopener" aria-label="Privacy Policy">Privacy</a> ‚Ä¢ 
    <a href="cookie.html" rel="noopener" aria-label="Cookie Policy">Cookie</a>
  </footer>

  <div class="cta-fixed">
    <a href="tel:+393335044709" aria-label="Chiama ora LIFE">üìû Chiama ora</a>
  </div>

  <div class="cookie" id="cookie" role="dialog" aria-live="polite" aria-label="Cookie">
    <span>Usiamo cookie tecnici per migliorare l‚Äôesperienza. Continuando accetti la nostra <a href="cookie.html" target="_blank" rel="noopener">cookie policy</a>.</span>
    <div class="cta-row" style="margin:0">
      <button class="btn btn-outline" id="cookieAccept" aria-label="Accetta cookie">Accetta</button>
    </div>
  </div>

  <script>
    const hdr=document.getElementById('hdr');
    const onScroll=()=>hdr.classList.toggle('scrolled', window.scrollY>20);
    document.addEventListener('scroll', onScroll); onScroll();
    const hamburger = document.getElementById('hamburger');
    const mobileNav = document.getElementById('mobileNav');
    const closeNav = document.getElementById('closeNav');
    function checkMobileMenu() {
      if(window.innerWidth < 960){
        hamburger.style.display = 'flex';
        hamburger.setAttribute('aria-expanded', mobileNav.classList.contains('open') ? 'true' : 'false');
      } else {
        hamburger.style.display = 'none';
        mobileNav.classList.remove('open');
        hamburger.setAttribute('aria-expanded', 'false');
      }
    }
    window.addEventListener('resize', checkMobileMenu);
    checkMobileMenu();
    hamburger.addEventListener('click',()=>{
      mobileNav.classList.add('open');
      hamburger.setAttribute('aria-expanded', 'true');
    });
    closeNav.addEventListener('click',()=>{
      mobileNav.classList.remove('open');
      hamburger.setAttribute('aria-expanded', 'false');
    });
    mobileNav.querySelectorAll('a').forEach(a=>a.addEventListener('click',()=>{
      mobileNav.classList.remove('open');
      hamburger.setAttribute('aria-expanded', 'false');
    }));
    const observer=new IntersectionObserver((entries)=>{
      entries.forEach(e=>{if(e.isIntersecting){e.target.classList.add('show')}})
    },{threshold:.2});
    document.querySelectorAll('.card').forEach(el=>observer.observe(el));
    document.getElementById('year').textContent=new Date().getFullYear();
    const ck=document.getElementById('cookie');
    const btnCk=document.getElementById('cookieAccept');
    if(localStorage.getItem('cookieAccepted')) ck.remove();
    btnCk.addEventListener('click',()=>{
      localStorage.setItem('cookieAccepted','1');
      ck.remove();
    });
    const slides = document.getElementById('slides');
    const slideItems = slides.querySelectorAll('.slide-img-bg');
    let index = 0, autoSlide;
    function showSlide(i){
      index = (i+slideItems.length)%slideItems.length;
      slides.style.transform = `translateX(-${index * 100}%)`;
    }
    function nextSlide(){ showSlide(index+1);}
    function prevSlide(){ showSlide(index-1);}
    document.getElementById('sliderNext').addEventListener('click',()=>{nextSlide();resetAuto();});
    document.getElementById('sliderPrev').addEventListener('click',()=>{prevSlide();resetAuto();});
    function resetAuto(){
      clearInterval(autoSlide);
      autoSlide = setInterval(nextSlide, 3000);
    }
    autoSlide = setInterval(nextSlide, 3000);
    let startX=0, isDown=false;
    slides.addEventListener('touchstart',e=>{isDown=true;startX=e.touches[0].clientX;});
    slides.addEventListener('touchmove',e=>{
      if(!isDown) return;
      let dx = e.touches[0].clientX - startX;
      if(Math.abs(dx)>50){
        if(dx>0) prevSlide(); else nextSlide();
        isDown=false;resetAuto();
      }
    });
    slides.addEventListener('touchend',()=>{isDown=false;});
    const WA_PHONE = '393335044709';
    const EMAIL_TO = 'info@life.it';
    function buildMessage(){
      const n=document.getElementById('name').value.trim();
      const p=document.getElementById('phone').value.trim();
      const e=document.getElementById('email').value.trim();
      const s=document.getElementById('service').value;
      const m=document.getElementById('message').value.trim();
      return `Richiesta preventivo%0A%0ANome: ${encodeURIComponent(n)}%0ATel: ${encodeURIComponent(p)}%0AEmail: ${encodeURIComponent(e)}%0AServizio: ${encodeURIComponent(s)}%0ADettagli: ${encodeURIComponent(m)}`;
    }
    document.getElementById('whatsappBtn').addEventListener('click', (ev)=>{
      ev.preventDefault();
      if(!validateForm()) return;
      const url=`https://wa.me/${WA_PHONE}?text=${buildMessage()}`;
      window.open(url,'_blank');
    });
    document.getElementById('emailBtn').addEventListener('click',(ev)=>{
      ev.preventDefault();
      if(!validateForm()) return;
      const subject=encodeURIComponent('Richiesta preventivo dal sito');
      const body=buildMessage().replace(/%0A/g, '\n');
      window.location.href=`mailto:${EMAIL_TO}?subject=${subject}&body=${body}`;
    });
    document.getElementById('quoteForm').addEventListener('submit',(ev)=>{
      ev.preventDefault();
      if(validateForm()) document.getElementById('whatsappBtn').click();
    });
    function validateForm(){
      let valid = true;
      const name = document.getElementById('name');
      const phone = document.getElementById('phone');
      const email = document.getElementById('email');
      document.getElementById('errName').textContent = '';
      document.getElementById('errPhone').textContent = '';
      document.getElementById('errEmail').textContent = '';
      if(!name.value.trim()){document.getElementById('errName').textContent='Inserisci il nome.';valid=false;}
      if(!phone.value.trim()){document.getElementById('errPhone').textContent='Inserisci il telefono.';valid=false;}
      if(email.value && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value)){document.getElementById('errEmail').textContent='Email non valida.';valid=false;}
      return valid;
    }
    document.getElementById('langToggle').addEventListener('click',()=>alert('Versione EN in preparazione. Possiamo tradurre i testi su richiesta.'));
    document.querySelectorAll('.faq-q').forEach(btn=>{
      btn.addEventListener('click', function(){
        const expanded = this.getAttribute('aria-expanded') === 'true';
        this.setAttribute('aria-expanded', !expanded);
        const answer = document.getElementById(this.getAttribute('aria-controls'));
        if(answer){
          answer.classList.toggle('open', !expanded);
        }
      });
      btn.addEventListener('keydown', function(e){
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          this.click();
        }
      });
    });
    // Slider recensioni automatico con frecce e tempo 6s
</script>
<script>
const reviewSlider = document.getElementById('reviewSlider');
if (reviewSlider) {
  let current = 0;
  let interval = null;

  function getReviews() {
    return reviewSlider.querySelectorAll('.review');
  }

  function showReview(idx) {
    const reviews = getReviews();
    if (!reviews.length) return;
    current = (idx + reviews.length) % reviews.length;
    reviews.forEach((r, i) => {
      r.classList.toggle('active', i === current);
    });
  }

  function nextReview() {
    showReview(current + 1);
  }

  function prevReview() {
    showReview(current - 1);
  }

  function resetInterval() {
    clearInterval(interval);
    interval = setInterval(nextReview, 6000);
  }

  document.getElementById('reviewPrev').addEventListener('click', () => { prevReview(); resetInterval(); });
  document.getElementById('reviewNext').addEventListener('click', () => { nextReview(); resetInterval(); });

  // Mostra la prima recensione all'avvio
  showReview(current);
  interval = setInterval(nextReview, 6000);

  // Aggiorna lo slider ogni volta che viene aggiunta una recensione
  const observer = new MutationObserver(() => {
    const reviews = getReviews();
    if (reviews.length === 1) current = 0;
    showReview(current);
  });
  observer.observe(reviewSlider, { childList: true });
}
</script>
<script>
const SUPABASE_URL = 'https://rwvcsoeueyzscjxqvwip.supabase.co'; // <-- incolla qui il tuo Project URL
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ3dmNzb2V1ZXl6c2NqeHF2d2lwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyMTQ0ODIsImV4cCI6MjA3MTc5MDQ4Mn0.k5kM71Ut6MJPgDV4NozbIFWGXYvvXNeJjSYrlrhKz7E';// <-- incolla qui la tua anon public key
const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

function starsHtml(n) {
  n = parseInt(n,10);
  let s = '';
  for(let i=1;i<=5;i++) s += i<=n ? '‚òÖ' : '‚òÜ';
  return s;
}
function formatMonthYear(val) {
  if(!val) return '';
  const [y,m] = val.split('-');
  const mesi = ['Gen','Feb','Mar','Apr','Mag','Giu','Lug','Ago','Set','Ott','Nov','Dic'];
  return `${mesi[parseInt(m,10)-1]}/${y}`;
}
function addReviewToDOM({name, surname, city, province, stars, text, date}) {
  const reviewSlider = document.getElementById('reviewSlider');
  if (!reviewSlider) return;
  const noMsg = document.getElementById('noReviewsMsg');
  if (noMsg) noMsg.remove();
  const initials = (name?.[0] || '').toUpperCase() + (surname?.[0] || '').toUpperCase();
  let luogo = city && province ? `${city} (${province})` : (city || province || '');
  let showDate = formatMonthYear(date);
  let starsTxt = starsHtml(stars);
  const small = `‚Äî ${name} ${surname && surname[0] ? surname[0]+'.' : ''}${luogo ? ', ' + luogo : ''}, ${showDate}`;
  const div = document.createElement('div');
  div.className = 'review';
  div.tabIndex = 0;
  div.innerHTML = `
    <div style="display:flex;align-items:center;gap:10px;">
      <span style="display:inline-block;width:36px;height:36px;background:#e6f7fb;color:${stars>=4?'#00C853':'#00B0FF'};font-weight:700;font-size:1.2rem;border-radius:50%;display:flex;align-items:center;justify-content:center;">${initials}</span>
      <div class="stars" aria-label="${stars} stelle">${starsTxt}</div>
    </div>
    <p>${text ? text.replace(/</g,"&lt;") : ''}</p>
    <small>${small}</small>
  `;
  reviewSlider.appendChild(div);
}

async function loadReviews() {
  const { data, error } = await supabase
    .from('reviews0')
    .select('*')
    .order('id', { ascending: true });
  if (error) return;
  const reviewSlider = document.getElementById('reviewSlider');
  if (!reviewSlider) return;
  if (!data || data.length === 0) return;
  document.getElementById('noReviewsMsg')?.remove();
  data.forEach(r => addReviewToDOM(r));
}

document.addEventListener('DOMContentLoaded', function() {
  loadReviews();

  // Stelle recensione
  const stars = Array.from(document.querySelectorAll('.star-label'));
  const inputs = Array.from(document.querySelectorAll('input[name="revStars"]'));
  const starValue = document.getElementById('starValue');
  let selected = 0;

  function updateStars(n) {
    stars.forEach(star => {
      star.classList.toggle('selected', parseInt(star.dataset.value) <= n);
    });
    starValue.textContent = n ? `${n} stelle` : '';
  }

  stars.forEach(star => {
    star.addEventListener('mouseenter', () => updateStars(star.dataset.value));
    star.addEventListener('mouseleave', () => updateStars(selected));
    star.addEventListener('click', () => {
      selected = parseInt(star.dataset.value);
      updateStars(selected);
      document.getElementById('star' + selected).checked = true;
    });
  });

  inputs.forEach(input => {
    input.addEventListener('change', () => {
      selected = parseInt(input.value);
      updateStars(selected);
    });
  });

  // Invio recensione
  const form = document.getElementById('reviewForm');
  const msg = document.getElementById('revFormMsg');
  if(form) {
    form.addEventListener('submit', async function(ev){
      ev.preventDefault();
      const name = form.revName.value.trim();
      const surname = form.revSurname.value.trim();
      const city = form.revCity.value.trim();
      const province = form.revProvince.value.trim().toUpperCase();
      const stars = form.revStars.value;
      const text = form.revText.value.trim();
      const date = form.revDate.value;
      if(!name || !surname || !city || !province || !stars || !text || !date) {
        msg.textContent = "Compila tutti i campi!";
        msg.style.color = "#d32f2f";
        msg.style.display = "block";
        return;
      }
      const review = {name,surname,city,province,stars,text,date};
      const { error } = await supabase.from('reviews0').insert([review]);
      if(error) {
        msg.textContent = "Errore nell'invio. Riprova.";
        msg.style.color = "#d32f2f";
        msg.style.display = "block";
        return;
      }
      addReviewToDOM(review);
      msg.textContent = "Recensione inviata! Grazie.";
      msg.style.color = "#00C853";
      msg.style.display = "block";
      form.reset();
      updateStars(0);
      selected = 0;
    });
  }
});
</script>
</body>
</html>
